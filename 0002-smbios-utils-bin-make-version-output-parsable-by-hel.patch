From 698c9ed5b86ce3a7400a08902464a6cade5b269b Mon Sep 17 00:00:00 2001
From: Peter Jones <pjones@redhat.com>
Date: Thu, 5 Oct 2017 15:32:05 -0400
Subject: [PATCH 02/22] smbios-utils-bin: make --version output parsable by
 help2man.

Signed-off-by: Peter Jones <pjones@redhat.com>
---
 src/bin/smbios-get-ut-data.c    | 2 +-
 src/bin/smbios-state-byte-ctl.c | 5 +++++
 src/bin/smbios-sys-info-lite.c  | 2 +-
 src/bin/smbios-upflag-ctl.c     | 2 +-
 4 files changed, 8 insertions(+), 3 deletions(-)

diff --git a/src/bin/smbios-get-ut-data.c b/src/bin/smbios-get-ut-data.c
index 7b0b62c37ff..0387326181d 100644
--- a/src/bin/smbios-get-ut-data.c
+++ b/src/bin/smbios-get-ut-data.c
@@ -81,7 +81,7 @@ main (int argc, char **argv)
             memory_obj_factory(MEMORY_UNIT_TEST_MODE | MEMORY_GET_SINGLETON, args);
             break;
         case 255:
-            printf(_("Libsmbios:    %s\n"), smbios_get_library_version_string());
+            printf("%s\n", smbios_get_library_version_string());
             exit(0);
             break;
         default:
diff --git a/src/bin/smbios-state-byte-ctl.c b/src/bin/smbios-state-byte-ctl.c
index b22e50efef2..559d2c3fa3d 100644
--- a/src/bin/smbios-state-byte-ctl.c
+++ b/src/bin/smbios-state-byte-ctl.c
@@ -48,6 +48,7 @@ struct options opts[] =
     { 2, "cmos_file",   N_("Debug: CMOS dump file to use instead of physical cmos"), "c", 1 },
     { 3, "set",         N_("Set CMOS state byte to new value"), "s", 1 },
     { 4, "owner",       N_("Set state byte owner"), "o", 1 },
+    { 255, "version",   N_("Display libsmbios version information"), "v", 0 },
     { 0, NULL, NULL, NULL, 0 }
 };
 
@@ -82,6 +83,10 @@ main (int argc, char **argv)
         case 4:
             owner = strtoul( args, 0, 0 );
             break;
+        case 255:
+            printf("%s\n", smbios_get_library_version_string());
+            exit(0);
+            break;
         default:
             break;
         }
diff --git a/src/bin/smbios-sys-info-lite.c b/src/bin/smbios-sys-info-lite.c
index 6fa9c7cb0b7..d594aefcfe3 100644
--- a/src/bin/smbios-sys-info-lite.c
+++ b/src/bin/smbios-sys-info-lite.c
@@ -84,7 +84,7 @@ main (int argc, char **argv)
             memory_obj_factory(MEMORY_UNIT_TEST_MODE | MEMORY_GET_SINGLETON, args);
             break;
         case 255:
-            printf( _("Libsmbios version:    %s\n"), smbios_get_library_version_string());
+            printf("%s\n", smbios_get_library_version_string());
             exit(0);
             break;
         default:
diff --git a/src/bin/smbios-upflag-ctl.c b/src/bin/smbios-upflag-ctl.c
index 28f628bee2f..f1725f4a85d 100644
--- a/src/bin/smbios-upflag-ctl.c
+++ b/src/bin/smbios-upflag-ctl.c
@@ -84,7 +84,7 @@ main (int argc, char **argv)
                 sysinfo_set_up_boot_flag( flag );
             break;
         case 255:
-            printf( _("Libsmbios version:    %s\n"), smbios_get_library_version_string());
+            printf("%s\n", smbios_get_library_version_string());
             exit(0);
             break;
         default:
-- 
2.14.3

